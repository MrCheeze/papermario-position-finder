event.onexit(function()
	joypad.setanalog({["P1 X Axis"]=0, ["P1 Y Axis"]=0})
end)

a_frames = 0
function nextFrame(x_input, y_input)
    prev_x = mainmemory.read_u32_be(0x10F1B0)
    prev_z = mainmemory.read_u32_be(0x10F1B8)
    savestate.save("temp.State")
    while mainmemory.read_u32_be(0x10F1B0) == prev_x and mainmemory.read_u32_be(0x10F1B8) == prev_z do
        while mainmemory.readbyte(0x10F23C) == 0xA do
            emu.frameadvance()
        end
        if mainmemory.readbyte(0x10F23C) == 0 then
            a_frames = 4
        end
        if a_frames > 0 then
            joypad.set({["P1 A"]="True"})
        end
        joypad.setanalog({["P1 X Axis"]=x_input, ["P1 Y Axis"]=y_input})
        emu.frameadvance()
        if mainmemory.readbyte(0x10F23C) == 1 or mainmemory.readbyte(0x10F23C) == 2 then
            savestate.load("temp.State")
            joypad.set({["P1 A"]="False"})
            a_frames = 0
            joypad.setanalog({["P1 X Axis"]=0, ["P1 Y Axis"]=0})
            while mainmemory.readbyte(0x10F23C) ~= 0xA do
                emu.frameadvance()
            end
        end
    end
    if a_frames > 0 then
        a_frames = a_frames - 1
    end
    joypad.setanalog({["P1 X Axis"]=0, ["P1 Y Axis"]=0})
end

function goToGoal()
    nextFrame(25, -6)
    nextFrame(47, -8)
    nextFrame(-65, 10)
    nextFrame(25, -6)
    nextFrame(25, -6)
    nextFrame(-46, 8)
    nextFrame(25, -6)
    nextFrame(25, -6)
    nextFrame(-46, 8)
    nextFrame(25, -6)
    nextFrame(25, -6)
    nextFrame(-46, 8)
    nextFrame(-10, -65)
    nextFrame(9, 58)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-15, -121)
    nextFrame(15, 120)
    nextFrame(-6, -25)
    nextFrame(-7, -36)
    nextFrame(9, 57)
end
goToGoal()
